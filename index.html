<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pilote Tréso GIA - Privé</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script type="importmap">
      {
        "imports": {
          "react": "https://esm.sh/react@18.2.0",
          "react-dom": "https://esm.sh/react-dom@18.2.0",
          "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
          "recharts": "https://esm.sh/recharts@2.12.2?external=react,react-dom",
          "lucide-react": "https://esm.sh/lucide-react@0.344.0?external=react,react-dom",
          "firebase/app": "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js",
          "firebase/auth": "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js",
          "firebase/firestore": "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js"
        }
      }
    </script>
    
    <style>
        body { background-color: #020617; color: #cbd5e1; }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="module">
        import React, { useState, useEffect, useMemo, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';
        import { 
            ArrowUpRight, ArrowDownRight, Wallet, Settings, Trash2, Info, 
            Repeat, Layers, Scale, Calculator, Filter, Cloud, CheckCircle, 
            Loader2, LogOut, ShieldCheck, Lock, User, XCircle
        } from 'lucide-react';
        
        import { initializeApp } from 'firebase/app';
        import { 
            getAuth, onAuthStateChanged, signInWithPopup, 
            GoogleAuthProvider, signOut 
        } from 'firebase/auth';
        import { 
            getFirestore, collection, doc, setDoc, deleteDoc, 
            onSnapshot, query 
        } from 'firebase/firestore';

        // --- SÉCURITÉ RENFORCÉE ---
        // Seul cet email pourra entrer. Tous les autres seront rejetés.
        const ADMIN_EMAIL = "fradaoud@gmail.com";

        // --- CONFIGURATION FIREBASE ---
        const firebaseConfig = {
            apiKey: "AIzaSyA0l9XI6mVfPW-HYvgu_ygA8Xrxyu41NPk", 
            authDomain: "compta-68499.firebaseapp.com",
            projectId: "compta-68499",
            storageBucket: "compta-68499.firebasestorage.app",
            messagingSenderId: "102037621816",
            appId: "1:102037621816:web:46c5026bf2f458f678aacd"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = firebaseConfig.projectId; 

        // --- COMPOSANTS UI ---
        const Card = ({ children, className = "" }) => React.createElement('div', { className: `bg-slate-900 rounded-xl shadow-lg border border-slate-800 ${className}` }, children);
        
        const Button = ({ children, onClick, variant = "primary", className = "", type = "button", disabled = false, title = "" }) => {
            const baseStyle = "px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed";
            const variants = {
                primary: "bg-indigo-600 text-white hover:bg-indigo-500 shadow-lg shadow-indigo-900/20",
                secondary: "bg-slate-800 text-slate-300 border border-slate-700 hover:bg-slate-700 hover:text-white",
                danger: "bg-red-900/20 text-red-400 hover:bg-red-900/40 border border-red-900/50",
                adjustment: "bg-purple-600 text-white hover:bg-purple-500 shadow-lg shadow-purple-900/20",
                google: "bg-white text-slate-700 hover:bg-slate-50 shadow-md"
            };
            return React.createElement('button', { type, onClick, disabled, title, className: `${baseStyle} ${variants[variant]} ${className}` }, children);
        };

        // --- ECRAN NON AUTORISÉ ---
        const UnauthorizedScreen = ({ onLogout, email }) => {
            return React.createElement('div', { className: "min-h-screen bg-slate-950 flex flex-col items-center justify-center p-4 text-center" },
                React.createElement(XCircle, { size: 64, className: "text-red-500 mb-4" }),
                React.createElement('h1', { className: "text-2xl font-bold text-white mb-2" }, "Accès Refusé"),
                React.createElement('p', { className: "text-slate-400 max-w-md mb-6" }, 
                    `Le compte ${email} n'est pas autorisé à accéder à cette application privée. Seul l'administrateur GIA peut se connecter.`
                ),
                React.createElement(Button, { variant: "danger", onClick: onLogout }, "Se déconnecter")
            );
        };

        // --- ECRAN DE CONNEXION ---
        const LoginScreen = ({ onLogin, loading }) => {
            return React.createElement('div', { className: "min-h-screen bg-slate-950 flex flex-col items-center justify-center p-4 relative overflow-hidden" },
                React.createElement('div', { className: "absolute top-1/4 left-1/4 w-64 h-64 bg-indigo-600/10 rounded-full blur-3xl" }),
                React.createElement('div', { className: "absolute bottom-1/4 right-1/4 w-64 h-64 bg-purple-600/10 rounded-full blur-3xl" }),
                React.createElement('div', { className: "relative z-10 max-w-md w-full bg-slate-900 p-8 rounded-2xl border border-slate-800 shadow-2xl flex flex-col items-center text-center space-y-6" },
                    React.createElement('div', { className: "w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center mb-2 shadow-inner" },
                        React.createElement(Lock, { size: 32, className: "text-indigo-500" })
                    ),
                    React.createElement('div', {},
                        React.createElement('h1', { className: "text-2xl font-bold text-white mb-2" }, "Coffre-fort GIA"),
                        React.createElement('p', { className: "text-slate-400 text-sm" }, "Espace privé et sécurisé. Identification requise.")
                    ),
                    React.createElement('div', { className: "w-full pt-4 border-t border-slate-800" },
                        React.createElement(Button, { variant: "google", onClick: onLogin, className: "w-full py-3", disabled: loading },
                            loading ? React.createElement(Loader2, { size: 20, className: "animate-spin text-slate-600" }) : "S'identifier avec Google"
                        )
                    )
                )
            );
        };

        // --- APPLICATION PRINCIPALE ---
        const App = () => {
            const [user, setUser] = useState(null);
            const [loadingAuth, setLoadingAuth] = useState(true);
            const [isAuthorized, setIsAuthorized] = useState(false); // New state for whitelisting
            
            const [syncStatus, setSyncStatus] = useState('idle');
            const [transactions, setTransactions] = useState([]);
            const [settings, setSettings] = useState({ defaultUrssafRate: 22.0, defaultTvaRate: 20.0 });
            const [viewMode, setViewMode] = useState('month');
            const [currentDate, setCurrentDate] = useState(new Date());
            const [isSettingsOpen, setIsSettingsOpen] = useState(false);
            const [formData, setFormData] = useState({
                title: '', amount: '', type: 'income', date: new Date().toISOString().split('T')[0],
                category: 'Vente GIA', hasTvaIncome: false, customTvaRateIncome: 20,
                hasUrssaf: true, customUrssafRate: 22, hasTvaExpense: false, customTvaRateExpense: 20,
                adjUrssaf: 0, adjTva: 0, isRecurring: false, recurrenceMonths: 12, isSplitPayment: false, splitCount: 3
            });
            const updateTimeoutRef = useRef(null);

            // Auth Listener & Security Check
            useEffect(() => {
                const unsubscribe = onAuthStateChanged(auth, (u) => {
                    setUser(u);
                    if (u) {
                        // LE VIDEUR VÉRIFIE L'EMAIL ICI
                        if (u.email === ADMIN_EMAIL) {
                            setIsAuthorized(true);
                        } else {
                            setIsAuthorized(false);
                        }
                    }
                    setLoadingAuth(false);
                });
                return () => unsubscribe();
            }, []);

            // Firestore Listeners (Only if authorized)
            useEffect(() => {
                if (!user || !isAuthorized) return;
                
                const q = query(collection(db, 'artifacts', appId, 'users', user.uid, 'transactions'));
                const unsubTx = onSnapshot(q, (snap) => {
                    setTransactions(snap.docs.map(d => ({ id: d.id, ...d.data() })));
                });
                const unsubSet = onSnapshot(doc(db, 'artifacts', appId, 'users', user.uid, 'settings', 'global'), (snap) => {
                    if (snap.exists()) {
                        setSettings(snap.data());
                        const s = snap.data();
                        setFormData(p => ({...p, customUrssafRate: s.defaultUrssafRate || 22, customTvaRateIncome: s.defaultTvaRate || 20, customTvaRateExpense: s.defaultTvaRate || 20}));
                    }
                });
                return () => { unsubTx(); unsubSet(); };
            }, [user, isAuthorized]);

            const handleLogin = async () => {
                try { await signInWithPopup(auth, new GoogleAuthProvider()); } catch (e) { alert("Erreur connexion: " + e.message); }
            };
            const handleLogout = () => signOut(auth);

            // ... (Reste des fonctions CRUD identiques) ...
            const saveTx = async (tx) => { setSyncStatus('syncing'); try { await setDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'transactions', String(tx.id)), tx); setSyncStatus('saved'); setTimeout(() => setSyncStatus('idle'), 2000); } catch (e) { setSyncStatus('error'); } };
            const deleteTx = async (id) => { try { await deleteDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'transactions', String(id))); } catch (e) {} };
            const saveSettings = async (s) => { try { await setDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'settings', 'global'), s); } catch (e) {} };
            const handleAdd = (e) => { e.preventDefault(); if (!formData.title) return; const baseAmount = parseFloat(formData.amount || 0); const baseDate = new Date(formData.date); let rates = { tva: 0, urssaf: 0, adjU: 0, adjT: 0 }; if (formData.type === 'income') { if(formData.hasTvaIncome) rates.tva = parseFloat(formData.customTvaRateIncome); if(formData.hasUrssaf) rates.urssaf = parseFloat(formData.customUrssafRate); } else if (formData.type === 'expense' && formData.hasTvaExpense) { rates.tva = parseFloat(formData.customTvaRateExpense); } else if (formData.type === 'adjustment') { rates.adjU = parseFloat(formData.adjUrssaf || 0); rates.adjT = parseFloat(formData.adjTva || 0); } const createTx = (offset, date, suffix = '', amt = null) => ({ id: Date.now() + offset, title: formData.title + suffix, amount: amt !== null ? amt : (formData.isSplitPayment ? baseAmount/formData.splitCount : baseAmount), type: formData.type, category: formData.category, date: date, tvaRate: rates.tva, urssafRate: rates.urssaf, adjUrssaf: rates.adjU, adjTva: rates.adjT }); const newTxs = []; if (formData.type === 'income' && formData.isSplitPayment) { for(let i=0; i<formData.splitCount; i++) { const d = new Date(baseDate); d.setMonth(baseDate.getMonth() + i); newTxs.push(createTx(i, d.toISOString().split('T')[0], ` (${i+1}/${formData.splitCount})`)); } } else if (formData.type === 'expense' && formData.isRecurring) { for(let i=0; i<formData.recurrenceMonths; i++) { const d = new Date(baseDate); d.setMonth(baseDate.getMonth() + i); newTxs.push(createTx(i, d.toISOString().split('T')[0])); } } else { newTxs.push(createTx(0, formData.date)); } newTxs.forEach(saveTx); setFormData({...formData, title: '', amount: '', isSplitPayment: false, isRecurring: false, adjUrssaf: 0, adjTva: 0}); };
            const handleUpdateTx = (id, field, val) => { const newTxs = transactions.map(t => t.id === id ? {...t, [field]: val} : t); setTransactions(newTxs); if(updateTimeoutRef.current) clearTimeout(updateTimeoutRef.current); updateTimeoutRef.current = setTimeout(() => { const tx = newTxs.find(t => t.id === id); if(tx) saveTx(tx); }, 800); };
            const calculateTax = (t) => { const amt = parseFloat(t.amount || 0); if(t.type === 'adjustment') return { net: amt - (t.adjUrssaf||0), urssaf: t.adjUrssaf||0, tvaNet: t.adjTva||0, tvaColl: 0, tvaDed: 0 }; if(t.type === 'income') { let ht = amt, tva = 0, urssaf = 0; if(t.tvaRate > 0) { ht = amt / (1 + t.tvaRate/100); tva = amt - ht; } if(t.urssafRate > 0) urssaf = ht * (t.urssafRate/100); return { net: ht - urssaf, urssaf, tvaNet: tva, tvaColl: tva, tvaDed: 0 }; } else { let ht = amt, tva = 0; if(t.tvaRate > 0) { ht = amt / (1 + t.tvaRate/100); tva = amt - ht; } return { net: 0, urssaf: 0, tvaNet: -tva, tvaColl: 0, tvaDed: tva }; } };
            const stats = useMemo(() => { let bal = 0, urssaf = 0, tvaNet = 0; transactions.forEach(t => { const v = parseFloat(t.amount||0); if(t.type === 'income' || t.type === 'adjustment') bal += v; else bal -= v; const tax = calculateTax(t); urssaf += parseFloat(tax.urssaf||0); tvaNet += parseFloat(tax.tvaNet||0); }); return { balance: bal, urssaf, tvaNet, realProfit: bal - (urssaf + Math.max(0, tvaNet)) }; }, [transactions]);
            const chartData = useMemo(() => { const grouped = {}; transactions.forEach(t => { if(!grouped[t.date]) grouped[t.date]=[]; grouped[t.date].push(t); }); let running = 0; return Object.keys(grouped).sort().reduce((acc, date) => { grouped[date].forEach(t => { const v = parseFloat(t.amount||0); if(t.type === 'income' || t.type === 'adjustment') running += v; else running -= v; }); const d = new Date(date); if(viewMode === 'month' && (d.getMonth() !== currentDate.getMonth() || d.getFullYear() !== currentDate.getFullYear())) return acc; if(viewMode === 'year' && d.getFullYear() !== currentDate.getFullYear()) return acc; acc.push({ date: new Date(date).toLocaleDateString('fr-FR', {day:'numeric', month:'short'}), solde: running }); return acc; }, []); }, [transactions, viewMode, currentDate]);
            const filteredTxs = useMemo(() => { return transactions.filter(t => { const d = new Date(t.date); return viewMode === 'month' ? d.getMonth() === currentDate.getMonth() && d.getFullYear() === currentDate.getFullYear() : d.getFullYear() === currentDate.getFullYear(); }).sort((a,b) => new Date(b.date) - new Date(a.date)); }, [transactions, currentDate, viewMode]);
            const formatEuro = (v) => new Intl.NumberFormat('fr-FR', { style: 'currency', currency: 'EUR' }).format(v);

            // --- RENDU CONDITIONNEL ---
            if (loadingAuth) return React.createElement('div', { className: "min-h-screen bg-slate-950 flex items-center justify-center text-indigo-400" }, React.createElement(Loader2, { size: 48, className: "animate-spin" }));
            
            if (!user) return React.createElement(LoginScreen, { onLogin: handleLogin, loading: false });

            // SI CONNECTÉ MAIS MAUVAIS EMAIL -> BLOCAGE
            if (user && !isAuthorized) return React.createElement(UnauthorizedScreen, { onLogout: handleLogout, email: user.email });

            // SI TOUT EST BON -> DASHBOARD
            return React.createElement('div', { className: "min-h-screen bg-slate-950 text-slate-300 font-sans p-4 pb-20 md:p-8" },
                React.createElement('div', { className: "max-w-7xl mx-auto space-y-6" },
                    React.createElement('div', { className: "flex flex-col md:flex-row justify-between gap-4 items-center" },
                        React.createElement('h1', { className: "text-2xl font-bold text-white flex items-center gap-2" }, React.createElement(Wallet, { className: "text-indigo-400" }), "Pilote GIA Cloud"),
                        React.createElement('div', { className: "flex items-center gap-3" },
                            React.createElement('span', { className: "flex items-center gap-2 px-3 py-1 bg-emerald-900/30 text-emerald-400 text-xs rounded-full border border-emerald-900/50" }, React.createElement(ShieldCheck, { size: 14 }), "Admin"),
                            syncStatus === 'syncing' && React.createElement(Loader2, { size: 16, className: "animate-spin text-indigo-400" }),
                            syncStatus === 'saved' && React.createElement(CheckCircle, { size: 16, className: "text-emerald-500" }),
                            React.createElement(Button, { variant: "secondary", onClick: () => setIsSettingsOpen(!isSettingsOpen) }, React.createElement(Settings, { size: 18 })),
                            React.createElement('div', { className: "flex bg-slate-900 p-1 rounded-lg border border-slate-800" },
                                React.createElement('button', { onClick: () => setViewMode('month'), className: `px-3 py-1.5 rounded text-sm ${viewMode==='month'?'bg-indigo-600 text-white':'text-slate-500'}` }, "Mois"),
                                React.createElement('button', { onClick: () => setViewMode('year'), className: `px-3 py-1.5 rounded text-sm ${viewMode==='year'?'bg-indigo-600 text-white':'text-slate-500'}` }, "Année")
                            ),
                            React.createElement(Button, { variant: "danger", onClick: handleLogout, className: "!px-2" }, React.createElement(LogOut, { size: 18 }))
                        )
                    ),
                    isSettingsOpen && React.createElement('div', { className: "bg-slate-900 p-6 rounded-xl border border-indigo-900/50 shadow-lg" },
                        React.createElement('h3', { className: "font-bold text-white mb-4" }, "Valeurs par défaut"),
                        React.createElement('div', { className: "grid grid-cols-2 gap-4" },
                            React.createElement('div', {}, React.createElement('label', { className: "text-xs text-slate-400" }, "Taux URSSAF %"), React.createElement('input', { type: "number", value: settings.defaultUrssafRate, onChange: e => { setSettings({...settings, defaultUrssafRate: e.target.value}); saveSettings({...settings, defaultUrssafRate: e.target.value}); }, className: "w-full bg-slate-950 border border-slate-700 rounded p-2 text-white" })),
                            React.createElement('div', {}, React.createElement('label', { className: "text-xs text-slate-400" }, "Taux TVA %"), React.createElement('input', { type: "number", value: settings.defaultTvaRate, onChange: e => { setSettings({...settings, defaultTvaRate: e.target.value}); saveSettings({...settings, defaultTvaRate: e.target.value}); }, className: "w-full bg-slate-950 border border-slate-700 rounded p-2 text-white" }))
                        )
                    ),
                    React.createElement('div', { className: "grid grid-cols-1 lg:grid-cols-3 gap-8" },
                        React.createElement('div', { className: "lg:col-span-2 space-y-6" },
                            React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-3 gap-4" },
                                React.createElement(Card, { className: "p-4 border-l-4 border-l-slate-500" }, React.createElement('div', { className: "text-slate-400 text-xs uppercase font-bold" }, "Solde Bancaire"), React.createElement('div', { className: "text-2xl font-bold text-white" }, formatEuro(stats.balance))),
                                React.createElement(Card, { className: "p-4 border-l-4 border-l-orange-500" }, React.createElement('div', { className: "text-orange-400 text-xs uppercase font-bold" }, "Provisions État"), React.createElement('div', { className: "text-2xl font-bold text-orange-500" }, formatEuro(stats.urssaf + Math.max(0, stats.tvaNet)))),
                                React.createElement(Card, { className: "p-4 border-l-4 border-l-emerald-500" }, React.createElement('div', { className: "text-emerald-400 text-xs uppercase font-bold" }, "Reste pour vivre"), React.createElement('div', { className: "text-2xl font-bold text-emerald-500" }, formatEuro(stats.realProfit)))
                            ),
                            React.createElement(Card, { className: "p-6 h-[300px]" },
                                React.createElement('div', { className: "flex justify-between mb-4" }, 
                                    React.createElement('h3', { className: "font-bold text-slate-200" }, "Projection"),
                                    viewMode === 'month' && React.createElement('div', { className: "flex items-center gap-4 text-sm bg-slate-950 px-3 py-1 rounded-full" },
                                        React.createElement('button', { onClick: () => setCurrentDate(new Date(currentDate.setMonth(currentDate.getMonth()-1))) }, "←"),
                                        React.createElement('span', { className: "w-24 text-center" }, currentDate.toLocaleDateString('fr-FR', {month:'long', year:'numeric'})),
                                        React.createElement('button', { onClick: () => setCurrentDate(new Date(currentDate.setMonth(currentDate.getMonth()+1))) }, "→")
                                    )
                                ),
                                React.createElement(ResponsiveContainer, { width: "100%", height: "85%" },
                                    React.createElement(AreaChart, { data: chartData },
                                        React.createElement("defs", null, React.createElement("linearGradient", { id: "colorSolde", x1: "0", y1: "0", x2: "0", y2: "1" }, React.createElement("stop", { offset: "5%", stopColor: "#6366f1", stopOpacity: 0.3 }), React.createElement("stop", { offset: "95%", stopColor: "#6366f1", stopOpacity: 0 }))),
                                        React.createElement(CartesianGrid, { strokeDasharray: "3 3", vertical: false, stroke: "#334155" }),
                                        React.createElement(XAxis, { dataKey: "date", axisLine: false, tickLine: false, tick: { fill: '#64748b', fontSize: 12 } }),
                                        React.createElement(YAxis, { axisLine: false, tickLine: false, tick: { fill: '#64748b', fontSize: 12 } }),
                                        React.createElement(Tooltip, { contentStyle: { backgroundColor: '#1e293b', border: '1px solid #334155', color: '#fff' } }),
                                        React.createElement(Area, { type: "monotone", dataKey: "solde", stroke: "#6366f1", strokeWidth: 3, fill: "url(#colorSolde)" })
                                    )
                                )
                            ),
                            React.createElement(Card, {},
                                React.createElement('div', { className: "p-4 border-b border-slate-800 bg-slate-800/50" }, React.createElement('h3', { className: "font-bold text-slate-200" }, "Historique")),
                                React.createElement('div', { className: "max-h-[500px] overflow-y-auto" },
                                    React.createElement('table', { className: "w-full text-sm text-left" },
                                        React.createElement('thead', { className: "text-xs text-slate-400 uppercase bg-slate-900 sticky top-0" },
                                            React.createElement('tr', {}, 
                                                React.createElement('th', { className: "px-4 py-3" }, "Date"),
                                                React.createElement('th', { className: "px-4 py-3" }, "Libellé"),
                                                React.createElement('th', { className: "px-4 py-3 text-right" }, "Montant"),
                                                React.createElement('th', { className: "px-4 py-3 text-center" }, "")
                                            )
                                        ),
                                        React.createElement('tbody', {}, filteredTxs.map(t => 
                                            React.createElement('tr', { key: t.id, className: "border-b border-slate-800 hover:bg-slate-800/50" },
                                                React.createElement('td', { className: "px-4 py-3" }, 
                                                    React.createElement('input', { type: "date", value: t.date, onChange: e => handleUpdateTx(t.id, 'date', e.target.value), className: "bg-transparent text-slate-400 text-xs w-[110px] outline-none" })
                                                ),
                                                React.createElement('td', { className: "px-4 py-3" },
                                                    React.createElement('div', { className: "text-slate-200 font-medium" }, t.title),
                                                    React.createElement('div', { className: "text-[10px] text-slate-500" }, t.category)
                                                ),
                                                React.createElement('td', { className: "px-4 py-3 text-right font-bold" },
                                                    React.createElement('input', { type: "number", value: t.amount, onChange: e => handleUpdateTx(t.id, 'amount', parseFloat(e.target.value)), className: `bg-transparent w-20 text-right outline-none ${t.type==='income'?'text-emerald-400':t.type==='expense'?'text-rose-400':'text-purple-400'}` }),
                                                    " €"
                                                ),
                                                React.createElement('td', { className: "px-4 py-3 text-center" },
                                                    React.createElement('button', { onClick: () => deleteTx(t.id), className: "text-red-500 hover:bg-red-500/10 p-1 rounded" }, React.createElement(Trash2, { size: 14 }))
                                                )
                                            )
                                        ))
                                    )
                                )
                            )
                        ),
                        React.createElement('div', { className: "space-y-6" },
                            React.createElement(Card, { className: "p-6 sticky top-6 border-t-4 border-t-indigo-600" },
                                React.createElement('h2', { className: "font-bold text-lg mb-6 text-white" }, "Saisie Cloud"),
                                React.createElement('form', { onSubmit: handleAdd, className: "space-y-5" },
                                    React.createElement('div', { className: "flex p-1 bg-slate-950 border border-slate-800 rounded-lg" },
                                        ['income','expense','adjustment'].map(type => 
                                            React.createElement('button', { key: type, type: "button", onClick: () => setFormData({...formData, type}), className: `flex-1 py-2 text-sm font-bold rounded ${formData.type===type ? (type==='income'?'bg-emerald-600 text-white':type==='expense'?'bg-rose-600 text-white':'bg-purple-600 text-white') : 'text-slate-500'}` }, type==='income'?'Entrée':type==='expense'?'Sortie':'Régul')
                                        )
                                    ),
                                    React.createElement('input', { type: "number", placeholder: "Montant", value: formData.amount, onChange: e => setFormData({...formData, amount: e.target.value}), className: "w-full p-3 bg-slate-950 border border-slate-700 rounded text-white font-bold" }),
                                    React.createElement('input', { type: "text", placeholder: "Titre", value: formData.title, onChange: e => setFormData({...formData, title: e.target.value}), className: "w-full p-3 bg-slate-950 border border-slate-700 rounded text-white" }),
                                    React.createElement('input', { type: "date", value: formData.date, onChange: e => setFormData({...formData, date: e.target.value}), className: "w-full p-3 bg-slate-950 border border-slate-700 rounded text-white" }),
                                    React.createElement(Button, { type: "submit", className: "w-full py-3", disabled: syncStatus === 'syncing' }, "Valider")
                                )
                            )
                        )
                    )
                )
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
